<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>TicTacToe</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="style/stillinn.css">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js">
	</script>
	<script>
	var turn = 'X';
	var isGameOver = new Boolean();
	$(document).ready(function() {
		$(".blank").click(function() {
			if (isGameOver != true) {
				$(this).removeClass("blank");
				$(this).addClass(turn);
				$.ajax({
					type: "POST",
					url: "/move",
					data: 'theMove=' + this.id + '&thePlayer=' + turn 
				)};.done(function(state) {
					if( turn === 'X' )
					{
						$("#"+id+":empty").append('<p class="marker">X</p>');
					}
					else if( turn === 'O' )
					{
						$("#"+id+":empty").append('<p class="marker">O</p>');	
					}
	                                if (state === "Winner") {
                                                alert(turn + "is the winner!");
                                                isGameOver = true;
                                        }
					else if( state === "draw" )
					{
						alert(turn + "we have a draw!");
						isGameOver = true;
					}					
					else {
						if (turn === 'X') turn = 'O';
						else turn = 'X';
					}
				}).fail(function() {
					alert("Thetta tokst ekki...");
				});
			}
			else {
				alert("The game is over!");
			}
		
		});
		$(':button').on('click', function(){
                $.get('/restart');
                $('.marker').remove();

		});
	});
	</script>
		
		
</head>

<body>
<div id="Gameboard">
	<h1>TicTacToe</h1>
	<table>
		<tr>
			<td class="blank" id="a1"></td>
			<td class="blank" id="a2"></td>
			<td class="blank" id="a3"></td>
		</tr>
		<tr>
			<td class="blank" id="b1"></td>
			<td class="blank" id="b2"></td>
			<td class="blank" id="b3"></td>
		</tr>
		<tr>
			<td class="blank" id="c1"></td>
			<td class="blank" id="c2"></td>
			<td class="blank" id="c3"></td>
		</tr>
	</table>
	<button type = "button" id = "restart"> 
		Restart 
	</button>
	 
</div>
</body>
</html>

